<!-- 
    会员服务>会员管理>会员建档页面 
-->
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>会员建档</title>
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="../css/company_management.css" rel="stylesheet">
</head>
<body>
    <div class="page-container">
        <!-- 子页面一级标题 -->
        <p class="title-p font-size-20">
            <span><i class="fa fa-user-plus sys-color" aria-hidden="true"></i> 会员建档</span>
            <a class="font-size-16 float-right" target="iframe" href="member_management.html">返回 <i class="fa fa-angle-double-right" aria-hidden="true"></i></a>
        </p>
        <!-- 子页面主div -->
        <div>
            <form class="form-horizontal" action="" method="" enctype="">
                <!-- 基本信息块 -->
                <div class="border-top">
                    <p class="sub-title-p font-size-16"><i class="fa fa-address-card-o sys-color" aria-hidden="true"></i> 基本信息</p>
                    <div class="info-box row">
                        <div class="info-col col-xs-6 col-md-4 col-lg-4">
                            <div class="col-name">
                                <span for="" class="col">姓名：</span>
                                <span for="" class="col">出生日期：</span>
                                <span for="" class="col">证件类型：</span>
                                <span for="" class="col">家属姓名：</span>
                                <span for="" class="col">家庭地址：</span>
                            </div>
                            <!-- oninvalid="this.setCustomValidity('请输入中文名或中译名')" -->
                            <div class="col-input">
                                <input type="text" id="name" class="form-control" required pattern="[\u4E00-\u9FA5]{2,5}(?:·[\u4E00-\u9FA5]{2,5})*"  onblur="nameCheck();" autocomplete="false">
                                <!-- <input type="text" id="name" class="form-control" required pattern="[\u4E00-\u9FA5]{2,5}(?:·[\u4E00-\u9FA5]{2,5})*" oninvalid="this.setCustomValidity('请输入中文名或中译名');" oninput="setCustomValidity('')" title="名字应由汉字或·组成"> -->
                                <input type="date" class="form-control">
                                <select name="id_type" id="" class="form-control">
                                    <option value="1">二代身份证</option>
                                    <option value="2">港澳通行证</option>
                                    <option value="3">台湾通行证</option>
                                    <option value="4">护照</option>
                                </select>
                                <input type="text" class="form-control" required>
                                <input type="text" id="test1" class="form-control">
                            </div>
                        </div>
                        <div class="info-col  col-xs-6 col-md-4 col-lg-4">
                            <div class="col-name">
                                <span for="" class="col">性别：</span>
                                <span for="" class="col">民族：</span>
                                <span for="" class="col">证件号码：</span>
                                <span for="" class="col">家属电话：</span>
                            </div>
                            <div class="col-input">
                                <div class="gender_radio">
                                    <input type="radio" name="gender" checked>男
                                    <i class="fa fa-mars" aria-hidden="true"></i>
                                    <input type="radio" name="gender">女
                                    <i class="fa fa-venus" aria-hidden="true"></i>
                                </div>
                                <input type="text" class="form-control">
                                <input type="text" class="form-control" required minlength="10" maxlength="18">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="pic-col center col-xs-12 col-md-3 col-lg-3">
                            <div id="preview">
                                <img id="imghead" class="img-icon" border="0" src="../images/timg.jpg">
                            </div>
                            <input class="btn btn-default" type="button" value="上传照片" onclick="imgClick();">
                            <input type="file" onchange="previewImage(this)" style="display: none;" id="previewImg">
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
                <!-- 展开按钮 -->
                <p class="title-p text-center border-both bg-grey">
                    <a href="javascript: more();">
                        <i id="arrow" class="fa fa-angle-double-down" aria-hidden="true"></i>
                        <span id="more">完善详细信息</span>
                    </a>
                </p>
                <!-- 其他信息块 -->
                <div id="healthInfo" class="hide">
                    <p class="sub-title-p font-size-16">
                        <i class="fa fa-th-large sys-color center" aria-hidden="true" style="width: 18px"></i> 健康信息
                    </p>
                    <div class="info-box row">
                        <div class="info-col col-xs-6 col-md-4 col-lg-4">
                            <div class="col-name">
                                <span for="" class="col">血型：</span>
                                <span for="" class="col">身高：</span>
                                <span for="" class="col">健康状况：</span>
                                <span for="" class="col">备注：</span>
                            </div>
                            <div class="col-input">
                                <div class="gender_radio">
                                    <input type="radio" name="bloody_type">A型
                                    <input type="radio" name="bloody_type">B型
                                    <input type="radio" name="bloody_type">AB型
                                    <input type="radio" name="bloody_type">O型
                                </div>
                                <input type="number" class="form-control" min="100" max="220" step="1">
                                <div class="gender_radio">
                                    <input type="checkbox" name="disease_id">糖尿病
                                    <input type="checkbox" name="disease_id">高血压
                                    <input type="checkbox" name="disease_id">高血脂
                                    <input type="checkbox" name="disease_id">冠心病
                                </div>
                                <input type="text" class="form-control" placeholder="其他健康疾病">
                            </div>
                        </div>
                        <div class="info-col  col-xs-6 col-md-4 col-lg-4">
                            <div class="col-name">
                                <span for="" class="col">自理级别：</span>
                                <span for="" class="col">体重：</span>
                            </div>
                            <div class="col-input">
                                <select name="selfCare_level" id="" class="form-control">
                                    <option value="1">完全自理</option>
                                    <option value="2">一定自理能力</option>
                                    <option value="3">无自理能力</option>
                                </select>
                                <input type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel text-center">
                    <input type="submit" class="btn btn-primary save_btn" value="保存">
                    <input type="button" class="btn btn-default save_btn" value="取消">
                </div>
            </form>
        </div>
    </div>
    <!-- 全局js -->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script>
        function imgClick(){
            $('#previewImg').click();
        }
        function previewImage(file)
        {
          var MAXWIDTH  = 200; 
          var MAXHEIGHT = 150;
          var div = document.getElementById('preview');
          if (file.files && file.files[0])
          {
              div.innerHTML ='<img id=imghead onclick=$("#previewImg").click()>';
              var img = document.getElementById('imghead');
              img.onload = function(){
                var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                img.width  =  rect.width;
                img.height =  rect.height;
                // img.style.marginLeft = rect.left+'px';
                img.style.marginTop = rect.top+'px';
              }
              var reader = new FileReader();
              reader.onload = function(evt){img.src = evt.target.result;}
              reader.readAsDataURL(file.files[0]);
          }
          else //兼容IE
          {
            var sFilter='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
            file.select();
            var src = document.selection.createRange().text;
            div.innerHTML = '<img id=imghead>';
            var img = document.getElementById('imghead');
            img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
            var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
            status =('rect:'+rect.top+','+rect.left+','+rect.width+','+rect.height);
            div.innerHTML = "<div id=divhead style='width:"+rect.width+"px;height:"+rect.height+"px;margin-top:"+rect.top+"px;"+sFilter+src+"\"'></div>";
          }
        }
        function clacImgZoomParam( maxWidth, maxHeight, width, height ){
            var param = {top:0, left:0, width:width, height:height};
            if( width>maxWidth || height>maxHeight ){
                rateWidth = width / maxWidth;
                rateHeight = height / maxHeight;
                
                if( rateWidth > rateHeight ){
                    param.width =  maxWidth;
                    param.height = Math.round(height / rateWidth);
                }else{
                    param.width = Math.round(width / rateHeight);
                    param.height = maxHeight;
                }
            }
            param.left = Math.round((maxWidth - param.width) / 2);
            param.top = Math.round((maxHeight - param.height) / 2);
            return param;
        }
        function more(){
            if($("#more").html() == "完善详细信息") {
                $("#healthInfo").removeClass("hide");
                $("#more").html("收起");
                $("#arrow").addClass("fa-rotate-180");
            }
            else{
                $("#healthInfo").addClass("hide");
                $("#more").html("完善详细信息");
                $("#arrow").removeClass("fa-rotate-180");
            }
        }
        function nameCheck(){
            var name = $("#name");
            if(name.val()!=""||name.val()!=""){
                name[0].setCustomValidity('');
            }
            else if(name[0].validity.valueMissing){
                name[0].setCustomValidity("姓名不能为空");  
            };
            if(name[0].validity.patternMismatch){ 
                name[0].setCustomValidity("姓名只能是至少2位的中文或包含·的中译名");
            }
        }
    </script>
</body>
</html>
